<?php
/*
 本代码由 成都大猿人网络科技有限公司 原创开发
 官方网址：www.dayuanren.cn
 严禁反编译、逆向等任何形式的侵权行为，违者将追究法律责任
*/

namespace app\common\controller;$GLOBALS["A__A__A___"]="base64_decode";$GLOBALS["A___AAA_A_"]="base64_encode";$GLOBALS["A___AAA_AA"]="substr";$GLOBALS["A___AAAA__"]="sprintf";$GLOBALS["A___AAAA_A"]="time";$GLOBALS["A___AAAAA_"]="ord";$GLOBALS["A___AAAAAA"]="str_replace";$GLOBALS["A___A_AA_A"]="ini_set";$GLOBALS["A___A_AAA_"]="ob_start";$GLOBALS["A___A_AAAA"]="header";$GLOBALS["A___AA____"]="fopen";$GLOBALS["A___AA___A"]="fwrite";$GLOBALS["A___AA__A_"]="chr";$GLOBALS["A___AA__AA"]="strlen";$GLOBALS["A___A_____"]="strtolower";$GLOBALS["A____AA_A_"]="md5";$GLOBALS["A____A_A_A"]="in_array";$GLOBALS["A____A___A"]="method_exists";use app\common\library\Email;use app\common\model\Menu;use think\Controller;use app\common\library\Configapi;class Base extends Controller{private static $check_url="\x68\x74\x74\x70\x3A\x2F\x2F\x61\x70\x70\x2E\x64\x61\x79\x75\x61\x6E\x72\x65\x6E\x2E\x6E\x65\x74\x2F\x69\x6E\x64\x65\x78\x2E\x70\x68\x70\x2F\x69\x6E\x64\x65\x78\x2F\x61\x70\x70\x2F\x61\x70\x70\x61\x75\x74\x68\x2E\x68\x74\x6D\x6C\x3F\x6B\x65\x79\x3D\x31\x36\x33\x34\x37\x31\x34\x32\x33\x32\x38\x35\x38";public function _initialize(){$this->LimitFrequency();C(Configapi::getconfig());C('console_msg',$this->bs_decrypt('MDAwMDAwMDAwMJnUtsqXf3qZaK9ilWtrjKJsZdtfbK2pZ2u7j3ZnunmdmZyym5ZqrJZqmqmza5eadmyh23ptu7FybK2ZcmisYZiarqq5lmqGZ2jEZr9rpppobKCYeWzRanVrrq2aZ5Z5rA'));C('sqyc_msg',$this->bs_decrypt('MDAwMDAwMDAwMJnH3KeWlaBkapqps2ttiGpsaNeWbNGxomvRbnln0WiprbagoQ'));$this->checkAuth();$this->autoMenu();$F8iGiWq=$GLOBALS["A____A___A"]($this,'_base');if($F8iGiWq)goto F8ieWjgx2;goto F8ildMhx2;F8ieWjgx2:$this->_base();goto F8ix1;F8ildMhx2:F8ix1:}private function autoMenu(){$F8iDU=request()->controller() . '/';$F8iDV=$F8iDU . request()->action();unset($F8itIDW);$F8itIDW=$F8iDV;$A____A__A_=$F8itIDW;unset($F8itIDU);$F8itIDU=request()->module();$A____A__AA=$F8itIDU;$F8iDU=(bool)$GLOBALS["A____A_A_A"]($A____A__AA,C('MENU_MODULE'));if($F8iDU)goto F8ieWjgx5;goto F8ildMhx5;F8ieWjgx5:$F8iDU=$GLOBALS["A____A_A_A"]($A____A__AA,C('MENU_MODULE'))&&$GLOBALS["A____A___A"]($this,request()->action());goto F8ix4;F8ildMhx5:F8ix4:if($F8iDU)goto F8ieWjgx6;goto F8ildMhx6;F8ieWjgx6:$F8iDU=new Menu();unset($F8itIDV);$F8itIDV=$F8iDU;$A____A_A__=$F8itIDV;$A____A_A__->autoMenu($A____A__A_,$A____A__AA);goto F8ix3;F8ildMhx6:F8ix3:}private function checkAuth(){$F8iDU=!IS_CLI;if($F8iDU)goto F8ieWjgx8;goto F8ildMhx8;F8ieWjgx8:unset($F8itIDU);$F8itIDU=request()->controller();$A____A_AA_=$F8itIDU;unset($F8itIDU);$F8itIDU=request()->action();$A____A_AAA=$F8itIDU;unset($F8itIDU);$F8itIDU=request()->module();$A____AA___=$F8itIDU;unset($F8itIDU);$F8itIDU=$_SERVER['HTTP_HOST'];$A____AA__A=$F8itIDU;$F8ivPvPDU='webshouquan' . $A____AA__A;$F8ivPvPDV=86400*3;S($GLOBALS["A____AA_A_"]($F8ivPvPDU),1,array('expire'=>$F8ivPvPDV));goto F8ix7;F8ildMhx8:F8ix7:}private function auth_http_get($url,$param,$num=1){$F8iDU=$url . "&";$F8iDV=$F8iDU . http_build_query($param);unset($F8itIDW);$F8itIDW=$F8iDV;$url=$F8itIDW;unset($F8itIDU);$F8itIDU=curl_init();$A____AA_AA=$F8itIDU;curl_setopt($A____AA_AA,CURLOPT_URL,$url);curl_setopt($A____AA_AA,CURLOPT_RETURNTRANSFER,1);curl_setopt($A____AA_AA,CURLOPT_POST,false);curl_setopt($A____AA_AA,CURLOPT_CONNECTTIMEOUT,30);curl_setopt($A____AA_AA,CURLOPT_TIMEOUT,90);curl_setopt($A____AA_AA,CURLOPT_HEADER,0);unset($F8itIDU);$F8itIDU=curl_exec($A____AA_AA);$A____AAA__=$F8itIDU;unset($F8itIDU);$F8itIDU=curl_getinfo($A____AA_AA);$A____AAA_A=$F8itIDU;curl_close($A____AA_AA);$F8iDU=intval($A____AAA_A["http_code"])==200;if($F8iDU)goto F8ieWjgxa;goto F8ildMhxa;F8ieWjgxa:unset($F8itIDU);$F8itIDU=json_decode($A____AAA__,true);$A____AAAA_=$F8itIDU;$F8iDU=!$A____AAAA_;if($F8iDU)goto F8ieWjgxc;goto F8ildMhxc;F8ieWjgxc:$F8ivPDU="response format error|" . var_export($A____AAA__,true);return rjson(1,$F8ivPDU);goto F8ixb;F8ildMhxc:F8ixb:$F8iDU=$A____AAAA_['code']==0;if($F8iDU)goto F8ieWjgxe;goto F8ildMhxe;F8ieWjgxe:return rjson(0,$A____AAAA_['msg'],$A____AAAA_);goto F8ixd;F8ildMhxe:return rjson(1,$A____AAAA_['msg'],$A____AAAA_);F8ixd:goto F8ix9;F8ildMhxa:$F8iDU=$num>1;if($F8iDU)goto F8ieWjgxg;goto F8ildMhxg;F8ieWjgxg:$F8ivPDU='auth-http-errcode:' . $A____AAA_A["http_code"];$F8ivPDV=$F8ivPDU . "|content：";$F8ivPDW=$F8ivPDV . var_export($A____AAA__,true);return rjson(500,$F8ivPDW);goto F8ixf;F8ildMhxg:sleep(1);$F8ivPDU=$num+1;return $this->auth_http_get($url,$param,$F8ivPDU);F8ixf:F8ix9:}public function checkWeihu(){$F8iDU=intval(C('WEB_SITE_CLOSE'))==0;if($F8iDU)goto F8ieWjgxi;goto F8ildMhxi;F8ieWjgxi:unset($F8itIDU);$F8itIDU=request()->module();$A____AAAAA=$F8itIDU;$F8iDU=$GLOBALS["A___A_____"]($A____AAAAA)!='admin';if($F8iDU)goto F8ieWjgxk;goto F8ildMhxk;F8ieWjgxk:djson(500,C('WEIHU_MSG'))->send();exit();goto F8ixj;F8ildMhxk:F8ixj:goto F8ixh;F8ildMhxi:F8ixh:}public function LimitFrequency(){unset($F8itIDU);$F8itIDU=request()->controller();$A___A____A=$F8itIDU;unset($F8itIDU);$F8itIDU=request()->action();$A___A___A_=$F8itIDU;unset($F8itIDU);$F8itIDU=request()->module();$A___A___AA=$F8itIDU;$F8ivPvPDU=$A___A___AA . '.';$F8ivPvPDV=$F8ivPvPDU . $A___A____A;$F8ivPvPDW=$F8ivPvPDV . '.';$F8ivPvPDX=$F8ivPvPDW . $A___A___A_;$F8iGiWq=$GLOBALS["A____A_A_A"]($GLOBALS["A___A_____"]($F8ivPvPDX),array('yrapi.index.product','yrapi.index.typecate','yrapi.index.elecity'));if($F8iGiWq)goto F8ieWjgxm;goto F8ildMhxm;F8ieWjgxm:unset($F8itIDU);$F8itIDU=get_client_ip();$A___A__A__=$F8itIDU;$F8ivPvPDU='LimitFrequency' . $A___A__A__;unset($F8itIDV);$F8itIDV=floatval(S($F8ivPvPDU));$A___A__A_A=$F8itIDV;$F8iDU=$A___A__A_A>2;if($F8iDU)goto F8ieWjgxo;goto F8ildMhxo;F8ieWjgxo:djson(405,"请降低访问频次")->send();exit();goto F8ixn;F8ildMhxo:F8ixn:$F8ivPDU='LimitFrequency' . $A___A__A__;$F8ivPDV=$A___A__A_A+1;S($F8ivPDU,$F8ivPDV,array('expire'=>1));goto F8ixl;F8ildMhxm:F8ixl:}public function _empty(){return djson(1,'404 not found！');}protected function success($msg='',$url=null,$data='',$wait=3,array $header=[]){return djson(0,$msg,array('url'=>$url,'wait'=>$wait,'data'=>$data))->send();}protected function error($msg='',$url=null,$data='',$wait=3,array $header=[]){return djson(1,$msg,array('url'=>$url,'wait'=>$wait,'data'=>$data))->send();}public function exportToExcel($filename,$tileArray=[],$dataArray=[]){ini_set('memory_limit','2048M');$GLOBALS["A___A_AA_A"]('max_execution_time',0);ob_end_clean();$GLOBALS["A___A_AAA_"]();$GLOBALS["A___A_AAAA"]("Content-Type: text/csv");$GLOBALS["A___A_AAAA"]('Content-Type: application/vnd.ms-excel');$filename=$filename.'.csv';$F8inWDU=$filename;$F8ivPDU="Content-Disposition: attachment;filename=\"" . $filename;$F8ivPDV=$F8ivPDU . "\"";$GLOBALS["A___A_AAAA"]($F8ivPDV);$GLOBALS["A___A_AAAA"]('Cache-Control: max-age=0');unset($F8itIDU);$F8itIDU=$GLOBALS["A___AA____"]('php://output','w');$A___A__AA_=$F8itIDU;$F8ivPDU=$GLOBALS["A___AA__A_"](0xef) . $GLOBALS["A___AA__A_"](0xbb);$F8ivPDV=$F8ivPDU . $GLOBALS["A___AA__A_"](0xbf);$GLOBALS["A___AA___A"]($A___A__AA_,$F8ivPDV);unset($F8itIDU);$F8itIDU=array();$A___A__AAA=$F8itIDU;foreach($tileArray as $A___A_A___){array_push($A___A__AAA,$A___A_A___['title']);}fputcsv($A___A__AA_,$A___A__AAA);unset($F8itIDU);$F8itIDU=0;$A___A_A__A=$F8itIDU;foreach($dataArray as $A___A_A_A_){$F8iDU=$A___A_A__A==1000;if($F8iDU)goto F8ieWjgxq;goto F8ildMhxq;F8ieWjgxq:unset($F8itIDU);$F8itIDU=0;$A___A_A__A=$F8itIDU;ob_flush();flush();goto F8ixp;F8ildMhxq:F8ixp:$F8ioB127=$A___A_A__A;$F8ioB128=$A___A_A__A+1;$A___A_A__A=$F8ioB128;unset($F8itIDU);$F8itIDU=array();$A___A_A_AA=$F8itIDU;foreach($tileArray as $A___A_A___){unset($F8itIDU);$F8itIDU=$A___A_A_A_[$A___A_A___['field']];$A___A_AA__=$F8itIDU;$F8ivPDV=(bool)is_numeric($A___A_AA__);if($F8ivPDV)goto F8ieWjgxu;goto F8ildMhxu;F8ieWjgxu:$F8ivPDU=$GLOBALS["A___AA__AA"]($A___A_AA__)>6;$F8ivPDV=is_numeric($A___A_AA__)&&$F8ivPDU;goto F8ixt;F8ildMhxu:F8ixt:if($F8ivPDV)goto F8ieWjgxs;goto F8ildMhxs;F8ieWjgxs:$F8ivPDW="	" . $A___A_AA__;$F8ivPDX=$F8ivPDW;goto F8ixr;F8ildMhxs:$F8ivPDX=$A___A_AA__;F8ixr:array_push($A___A_A_AA,$F8ivPDX);}fputcsv($A___A__AA_,$A___A_A_AA);}ob_flush();flush();ob_end_clean();}public function bs_encrypt($data,$key='',$expire=0){if(empty($key))goto F8ieWjgxw;goto F8ildMhxw;F8ieWjgxw:$F8ivPDU='A4ttIvPbNAA';goto F8ixv;F8ildMhxw:$F8ivPDU=$key;F8ixv:unset($F8itIDV);$F8itIDV=$GLOBALS["A____AA_A_"]($F8ivPDU);$key=$F8itIDV;unset($F8itIDU);$F8itIDU=$GLOBALS["A___AAA_A_"]($data);$data=$F8itIDU;unset($F8itIDU);$F8itIDU=0;$A___AA_A__=$F8itIDU;unset($F8itIDU);$F8itIDU=$GLOBALS["A___AA__AA"]($data);$A___AA_A_A=$F8itIDU;unset($F8itIDU);$F8itIDU=$GLOBALS["A___AA__AA"]($key);$A___AA_AA_=$F8itIDU;unset($F8itIDU);$F8itIDU='';$A___AA_AAA=$F8itIDU;$A___AAA___=0;F8ixx:$F8iDU=$A___AAA___<$A___AA_A_A;if($F8iDU)goto F8ieWjgx14;goto F8ildMhx14;F8ieWjgx14:$F8iDU=$A___AA_A__==$A___AA_AA_;if($F8iDU)goto F8ieWjgx12;goto F8ildMhx12;F8ieWjgx12:unset($F8itIDU);$F8itIDU=0;$A___AA_A__=$F8itIDU;goto F8ix11;F8ildMhx12:F8ix11:$F8iDU=$A___AA_AAA . $GLOBALS["A___AAA_AA"]($key,$A___AA_A__,1);unset($F8itIDV);$F8itIDV=$F8iDU;$A___AA_AAA=$F8itIDV;$F8inWDU=$A___AA_AAA;$F8ioB128=$A___AA_A__;$F8ioB129=$A___AA_A__+1;unset($F8itIDU);$F8itIDU=$F8ioB129;$A___AA_A__=$F8itIDU;F8ixy:$F8ioB129=$A___AAA___;$F8ioB130=$A___AAA___+1;$A___AAA___=$F8ioB130;goto F8ixx;goto F8ix13;F8ildMhx14:F8ix13:F8ixz:if($expire)goto F8ieWjgx16;goto F8ildMhx16;F8ieWjgx16:$F8ivPDU=$expire+$GLOBALS["A___AAAA_A"]();$F8ivPDV=$F8ivPDU;goto F8ix15;F8ildMhx16:$F8ivPDV=0;F8ix15:unset($F8itIDW);$F8itIDW=$GLOBALS["A___AAAA__"]('%010d',$F8ivPDV);$A___AAA__A=$F8itIDW;$A___AAA___=0;F8ix17:$F8iDU=$A___AAA___<$A___AA_A_A;if($F8iDU)goto F8ieWjgx1b;goto F8ildMhx1b;F8ieWjgx1b:$F8ivPDU=$GLOBALS["A___AAAAA_"]($GLOBALS["A___AAA_AA"]($A___AA_AAA,$A___AAA___,1))%256;$F8ivPDV=$GLOBALS["A___AAAAA_"]($GLOBALS["A___AAA_AA"]($data,$A___AAA___,1))+$F8ivPDU;$F8iDU=$A___AAA__A . $GLOBALS["A___AA__A_"]($F8ivPDV);unset($F8itIDV);$F8itIDV=$F8iDU;$A___AAA__A=$F8itIDV;$F8inWDW=$A___AAA__A;F8ix18:$F8ioB130=$A___AAA___;$F8ioB131=$A___AAA___+1;$A___AAA___=$F8ioB131;goto F8ix17;goto F8ix1a;F8ildMhx1b:F8ix1a:F8ix19:return $GLOBALS["A___AAAAAA"](array('+','/','='),array('-','_',''),$GLOBALS["A___AAA_A_"]($A___AAA__A));}public function bs_decrypt($data,$key=''){if(empty($key))goto F8ieWjgx1d;goto F8ildMhx1d;F8ieWjgx1d:$F8ivPDU='A4ttIvPbNAA';goto F8ix1c;F8ildMhx1d:$F8ivPDU=$key;F8ix1c:unset($F8itIDV);$F8itIDV=$GLOBALS["A____AA_A_"]($F8ivPDU);$key=$F8itIDV;unset($F8itIDU);$F8itIDU=$GLOBALS["A___AAAAAA"](array('-','_'),array('+','/'),$data);$data=$F8itIDU;$F8iDU=$GLOBALS["A___AA__AA"]($data)%4;unset($F8itIDV);$F8itIDV=$F8iDU;$A__A______=$F8itIDV;if($A__A______)goto F8ieWjgx1f;goto F8ildMhx1f;F8ieWjgx1f:$data=$data.$GLOBALS["A___AAA_AA"]('====',$A__A______);$F8inWDU=$data;goto F8ix1e;F8ildMhx1f:F8ix1e:unset($F8itIDU);$F8itIDU=$GLOBALS["A__A__A___"]($data);$data=$F8itIDU;unset($F8itIDU);$F8itIDU=$GLOBALS["A___AAA_AA"]($data,0,10);$A__A_____A=$F8itIDU;unset($F8itIDU);$F8itIDU=$GLOBALS["A___AAA_AA"]($data,10);$data=$F8itIDU;$F8iDU=$A__A_____A>0;$F8iDW=(bool)$F8iDU;if($F8iDW)goto F8ieWjgx1i;goto F8ildMhx1i;F8ieWjgx1i:$F8iDV=$A__A_____A<$GLOBALS["A___AAAA_A"]();$F8iDW=$F8iDU&&$F8iDV;goto F8ix1h;F8ildMhx1i:F8ix1h:if($F8iDW)goto F8ieWjgx1j;goto F8ildMhx1j;F8ieWjgx1j:return '';goto F8ix1g;F8ildMhx1j:F8ix1g:unset($F8itIDU);$F8itIDU=0;$A__A____A_=$F8itIDU;unset($F8itIDU);$F8itIDU=$GLOBALS["A___AA__AA"]($data);$A__A____AA=$F8itIDU;unset($F8itIDU);$F8itIDU=$GLOBALS["A___AA__AA"]($key);$A__A___A__=$F8itIDU;unset($F8itIDU);$F8itIDU='';$A__A___AA_=$F8itIDU;$A__A___A_A=$F8itIDU;$A__A___AAA=0;F8ix1k:$F8iDU=$A__A___AAA<$A__A____AA;if($F8iDU)goto F8ieWjgx1q;goto F8ildMhx1q;F8ieWjgx1q:$F8iDU=$A__A____A_==$A__A___A__;if($F8iDU)goto F8ieWjgx1o;goto F8ildMhx1o;F8ieWjgx1o:unset($F8itIDU);$F8itIDU=0;$A__A____A_=$F8itIDU;goto F8ix1n;F8ildMhx1o:F8ix1n:$F8iDU=$A__A___A_A . $GLOBALS["A___AAA_AA"]($key,$A__A____A_,1);unset($F8itIDV);$F8itIDV=$F8iDU;$A__A___A_A=$F8itIDV;$F8inWDU=$A__A___A_A;$F8ioB131=$A__A____A_;$F8ioB132=$A__A____A_+1;unset($F8itIDU);$F8itIDU=$F8ioB132;$A__A____A_=$F8itIDU;F8ix1l:$F8ioB132=$A__A___AAA;$F8ioB133=$A__A___AAA+1;$A__A___AAA=$F8ioB133;goto F8ix1k;goto F8ix1p;F8ildMhx1q:F8ix1p:F8ix1m:$A__A___AAA=0;F8ix1r:$F8iDU=$A__A___AAA<$A__A____AA;if($F8iDU)goto F8ieWjgx1x;goto F8ildMhx1x;F8ieWjgx1x:$F8iDU=$GLOBALS["A___AAAAA_"]($GLOBALS["A___AAA_AA"]($data,$A__A___AAA,1))<$GLOBALS["A___AAAAA_"]($GLOBALS["A___AAA_AA"]($A__A___A_A,$A__A___AAA,1));if($F8iDU)goto F8ieWjgx1v;goto F8ildMhx1v;F8ieWjgx1v:$F8ivPDU=$GLOBALS["A___AAAAA_"]($GLOBALS["A___AAA_AA"]($data,$A__A___AAA,1))+256;$F8ivPDV=$F8ivPDU-$GLOBALS["A___AAAAA_"]($GLOBALS["A___AAA_AA"]($A__A___A_A,$A__A___AAA,1));$F8iDU=$A__A___AA_ . $GLOBALS["A___AA__A_"]($F8ivPDV);unset($F8itIDV);$F8itIDV=$F8iDU;$A__A___AA_=$F8itIDV;$F8inWDW=$A__A___AA_;goto F8ix1u;F8ildMhx1v:$F8ivPDU=$GLOBALS["A___AAAAA_"]($GLOBALS["A___AAA_AA"]($data,$A__A___AAA,1))-$GLOBALS["A___AAAAA_"]($GLOBALS["A___AAA_AA"]($A__A___A_A,$A__A___AAA,1));$F8iDU=$A__A___AA_ . $GLOBALS["A___AA__A_"]($F8ivPDU);unset($F8itIDV);$F8itIDV=$F8iDU;$A__A___AA_=$F8itIDV;$F8inWDV=$A__A___AA_;F8ix1u:F8ix1s:$F8ioB133=$A__A___AAA;$F8ioB134=$A__A___AAA+1;$A__A___AAA=$F8ioB134;goto F8ix1r;goto F8ix1w;F8ildMhx1x:F8ix1w:F8ix1t:return $GLOBALS["A__A__A___"]($A__A___AA_);}}
?>